{"ast":null,"code":"var _jsxFileName = \"/home/sean/Downloads/nft-tracer-app/frontend/src/RealtimeView.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport io from 'socket.io-client';\nimport Plot from 'react-plotly.js';\nimport './Realtime.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_BASE = process.env.REACT_APP_API_BASE || 'http://localhost:5000/api';\nconst SOCKET_URL = process.env.REACT_APP_SOCKET_URL || 'http://localhost:5000';\n\n// Hook names mapping\nconst HOOK_NAMES = {\n  0: 'PRE_ROUTING',\n  1: 'LOCAL_IN',\n  2: 'FORWARD',\n  3: 'LOCAL_OUT',\n  4: 'POST_ROUTING'\n};\n\n// Hook order for visualization\nconst HOOK_ORDER = ['PRE_ROUTING', 'LOCAL_IN', 'FORWARD', 'LOCAL_OUT', 'POST_ROUTING'];\nconst LAYER_ORDER = ['Ingress', 'L2', 'IP', 'Firewall', 'Socket', 'Egress'];\nconst HOOK_COLORS = {\n  'PRE_ROUTING': '#667eea',\n  'LOCAL_IN': '#28a745',\n  'FORWARD': '#ffc107',\n  'LOCAL_OUT': '#dc3545',\n  'POST_ROUTING': '#6c757d',\n  'PREROUTING': '#667eea',\n  'INPUT': '#28a745',\n  'OUTPUT': '#dc3545',\n  'POSTROUTING': '#6c757d'\n};\nconst VERDICT_COLORS = {\n  'ACCEPT': '#28a745',\n  'DROP': '#dc3545',\n  'QUEUE': '#ffc107',\n  'STOLEN': '#6c757d',\n  'CONTINUE': '#17a2b8'\n};\nconst PROTOCOL_ICONS = {\n  'TCP': 'ðŸ”·',\n  'UDP': 'ðŸ”¶',\n  'ICMP': 'ðŸ“¡',\n  'PROTO_6': 'ðŸ”·',\n  'PROTO_17': 'ðŸ”¶',\n  'PROTO_1': 'ðŸ“¡'\n};\n\n// Color based on drop rate\nfunction getColorFromDropRate(dropRate) {\n  if (dropRate <= 5) {\n    return 'rgba(0, 255, 127, 0.8)'; // Green\n  } else if (dropRate <= 10) {\n    return 'rgba(144, 238, 144, 0.8)'; // Light Green\n  } else if (dropRate <= 20) {\n    return 'rgba(255, 215, 0, 0.8)'; // Gold\n  } else if (dropRate <= 50) {\n    return 'rgba(255, 165, 0, 0.8)'; // Orange\n  } else {\n    return 'rgba(255, 0, 0, 0.8)'; // Red\n  }\n}\n\n// Build Sankey diagram data with rich tooltips\nfunction buildSankeyData(stats) {\n  if (!stats || !stats.hooks) {\n    return {\n      nodes: [],\n      links: []\n    };\n  }\n  const nodes = [];\n  const links = [];\n  const nodeMap = new Map(); // name -> index\n  let nodeIndex = 0;\n\n  // 1. Add Hook nodes vá»›i tooltip text\n  HOOK_ORDER.forEach(hookName => {\n    if (stats.hooks[hookName]) {\n      const hookData = stats.hooks[hookName];\n\n      // Build tooltip cho hook\n      const hookTooltip = `<b>${hookName} Hook</b><br>` + `Total Packets: ${hookData.packets_total}<br>` + `Layers: ${Object.keys(hookData.layers || {}).length}`;\n      nodes.push({\n        label: `<b>${hookName}</b><br>${hookData.packets_total} pkts`,\n        color: 'rgba(100, 150, 255, 0.8)',\n        customdata: {\n          type: 'hook',\n          name: hookName,\n          tooltip: hookTooltip\n        },\n        hovertext: hookTooltip,\n        hoverinfo: 'text'\n      });\n      nodeMap.set(hookName, nodeIndex++);\n    }\n  });\n\n  // 2. Add Layer nodes vá»›i detailed tooltips\n  HOOK_ORDER.forEach(hookName => {\n    const hookData = stats.hooks[hookName];\n    if (!hookData) return;\n    const layers = hookData.layers || {};\n    LAYER_ORDER.forEach(layerName => {\n      if (layers[layerName]) {\n        const layerData = layers[layerName];\n        const nodeName = `${hookName}::${layerName}`;\n\n        // Color based on drop rate\n        const color = getColorFromDropRate(layerData.drop_rate || 0);\n\n        // Build detailed tooltip theo yÃªu cáº§u\n        const verdictBreakdown = layerData.verdict_breakdown || {};\n        const verdictText = Object.entries(verdictBreakdown).map(([verdict, count]) => {\n          const pct = layerData.packets_in > 0 ? (count / layerData.packets_in * 100).toFixed(1) : 0;\n          return `${verdict}: ${pct}%`;\n        }).join(', ');\n        const topFunc = layerData.top_function || 'N/A';\n        const topFuncCalls = layerData.top_function_calls || 0;\n        const errorBreakdown = layerData.error_breakdown || {};\n        const errorText = Object.entries(errorBreakdown).filter(([_, count]) => count > 0).map(([error, count]) => `${error} (${count})`).join(', ') || 'None';\n        const layerTooltip = `<b>${layerName} (${hookName})</b><br>` + `Packets: ${layerData.packets_in}<br>` + `Drop: ${(layerData.drop_rate || 0).toFixed(1)}%<br>` + `Verdicts: ${verdictText || 'N/A'}<br>` + `Top Func: ${topFunc} (${topFuncCalls} calls)<br>` + `Error: ${errorText}<br>` + `Avg latency: ${(layerData.avg_latency_ms || 0).toFixed(2)} ms`;\n        nodes.push({\n          label: `<b>${layerName}</b><br>` + `${layerData.packets_in} pkts<br>` + `${(layerData.drop_rate || 0).toFixed(1)}% drop<br>` + `${(layerData.avg_latency_ms || 0).toFixed(2)}ms`,\n          color: color,\n          customdata: {\n            type: 'layer',\n            hook: hookName,\n            layer: layerName,\n            data: layerData,\n            tooltip: layerTooltip\n          },\n          hovertext: layerTooltip,\n          hoverinfo: 'text'\n        });\n        nodeMap.set(nodeName, nodeIndex++);\n      }\n    });\n  });\n\n  // 3. Build links: Hook -> Layer with tooltips\n  HOOK_ORDER.forEach(hookName => {\n    const hookData = stats.hooks[hookName];\n    if (!hookData) return;\n    const hookIndex = nodeMap.get(hookName);\n    const layers = hookData.layers || {};\n    LAYER_ORDER.forEach(layerName => {\n      if (layers[layerName]) {\n        const layerData = layers[layerName];\n        const layerNodeName = `${hookName}::${layerName}`;\n        const layerIndex = nodeMap.get(layerNodeName);\n        const linkTooltip = `${hookName} â†’ ${layerName}<br>` + `Flow: ${layerData.packets_in} packets<br>` + `Dropped: ${layerData.drops || 0}`;\n\n        // Link value = packets_in\n        links.push({\n          source: hookIndex,\n          target: layerIndex,\n          value: layerData.packets_in,\n          color: 'rgba(200, 200, 200, 0.3)',\n          customdata: {\n            hook: hookName,\n            layer: layerName,\n            packets: layerData.packets_in,\n            drops: layerData.drops || 0,\n            tooltip: linkTooltip\n          },\n          hovertext: linkTooltip,\n          hoverinfo: 'text'\n        });\n      }\n    });\n  });\n  return {\n    nodes,\n    links\n  };\n}\nfunction RealtimeView() {\n  _s();\n  var _stats$total_packets, _stats$packets_per_se, _stats$uptime_seconds;\n  const [enabled, setEnabled] = useState(false);\n  const [connected, setConnected] = useState(false);\n  const [stats, setStats] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [sankeyData, setSankeyData] = useState(null);\n  const socketRef = useRef(null);\n  // Removed: recentEvents and maxEvents - no longer needed\n\n  // Initialize Socket.IO connection\n  useEffect(() => {\n    const socket = io(SOCKET_URL, {\n      transports: ['websocket', 'polling'],\n      reconnection: true,\n      reconnectionDelay: 1000,\n      reconnectionAttempts: 5\n    });\n    socket.on('connect', () => {\n      console.log('[Realtime] Connected to WebSocket');\n      setConnected(true);\n      loadStats();\n    });\n    socket.on('disconnect', () => {\n      console.log('[Realtime] Disconnected from WebSocket');\n      setConnected(false);\n    });\n\n    // Removed packet_event listener - only use stats_update now\n    // socket.on('packet_event', ...) \n    // We now rely on stats_update every 1s for visualization\n\n    socket.on('stats_update', stats => {\n      console.log('[Realtime] Received stats_update:', stats);\n      setStats(stats);\n\n      // Build Sankey data\n      const {\n        nodes,\n        links\n      } = buildSankeyData(stats);\n      if (nodes.length > 0) {\n        setSankeyData({\n          nodes,\n          links\n        });\n      }\n    });\n    socket.on('status', status => {\n      setEnabled(status.enabled);\n    });\n    socketRef.current = socket;\n    return () => {\n      socket.disconnect();\n    };\n  }, []);\n\n  // Load stats periodically - every 1 second to match backend emission\n  useEffect(() => {\n    if (enabled && connected) {\n      const interval = setInterval(loadStats, 1000);\n      return () => clearInterval(interval);\n    }\n  }, [enabled, connected]);\n  const loadStats = async () => {\n    try {\n      const res = await axios.get(`${API_BASE}/realtime/stats`);\n      setStats(res.data);\n      setEnabled(res.data.enabled);\n\n      // Build Sankey data\n      if (res.data && res.data.hooks) {\n        const {\n          nodes,\n          links\n        } = buildSankeyData(res.data);\n        if (nodes.length > 0) {\n          setSankeyData({\n            nodes,\n            links\n          });\n        }\n      }\n    } catch (err) {\n      console.error('Error loading realtime stats:', err);\n    }\n  };\n  const toggleRealtime = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      if (enabled) {\n        await axios.post(`${API_BASE}/realtime/disable`);\n        setEnabled(false);\n        setSankeyData(null);\n      } else {\n        await axios.post(`${API_BASE}/realtime/enable`);\n        setEnabled(true);\n      }\n      await loadStats();\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || 'Failed to toggle realtime');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const resetStats = async () => {\n    setLoading(true);\n    try {\n      await axios.post(`${API_BASE}/realtime/reset`);\n      setSankeyData(null);\n      await loadStats();\n    } catch (err) {\n      setError('Failed to reset stats');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const formatTimestamp = timestamp => {\n    const date = new Date(timestamp * 1000);\n    return date.toLocaleTimeString('en-US', {\n      hour12: false,\n      hour: '2-digit',\n      minute: '2-digit',\n      second: '2-digit',\n      fractionalSecondDigits: 3\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"realtime-container\",\n    children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"realtime-error\",\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"\\u26A0\\uFE0F Error:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 11\n      }, this), \" \", error, /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setError(null),\n        children: \"\\u2715\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"realtime-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"realtime-header-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\uD83C\\uDFA5 Realtime Packet Visualization\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"connection-status\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: `status-dot ${connected ? 'connected' : 'disconnected'}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: connected ? 'Connected' : 'Disconnected'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"realtime-header-right\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `btn ${enabled ? 'btn-danger' : 'btn-primary'}`,\n          onClick: toggleRealtime,\n          disabled: loading || !connected,\n          children: loading ? 'â³ Loading...' : enabled ? 'â¸ï¸ Disable' : 'â–¶ï¸ Enable'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 11\n        }, this), enabled && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-secondary\",\n          onClick: resetStats,\n          disabled: loading,\n          children: \"\\uD83D\\uDD04 Reset Stats\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 7\n    }, this), !enabled && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"realtime-disabled-notice\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\uD83D\\uDCFA Realtime Visualization Disabled\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Click \\\"Enable\\\" to start capturing live packet events\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"hint\",\n        children: \"\\uD83D\\uDCA1 Tip: Enable realtime to see live packet flows through hooks and layers\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 9\n    }, this), enabled && stats && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"realtime-stats-grid\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"realtime-stat-card primary\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-icon\",\n            children: \"\\uD83D\\uDCCA\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-value\",\n              children: ((_stats$total_packets = stats.total_packets) === null || _stats$total_packets === void 0 ? void 0 : _stats$total_packets.toLocaleString()) || 0\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-label\",\n              children: \"Total Packets\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"realtime-stat-card success\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-icon\",\n            children: \"\\u26A1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-value\",\n              children: ((_stats$packets_per_se = stats.packets_per_second) === null || _stats$packets_per_se === void 0 ? void 0 : _stats$packets_per_se.toFixed(1)) || 0\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-label\",\n              children: \"Packets/Second\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"realtime-stat-card warning\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-icon\",\n            children: \"\\u23F1\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-value\",\n              children: [((_stats$uptime_seconds = stats.uptime_seconds) === null || _stats$uptime_seconds === void 0 ? void 0 : _stats$uptime_seconds.toFixed(0)) || 0, \"s\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-label\",\n              children: \"Uptime\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 411,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"realtime-stat-card info\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-icon\",\n            children: \"\\uD83E\\uDE9D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 416,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-value\",\n              children: Object.keys(stats.hooks || {}).length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 418,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-label\",\n              children: \"Active Hooks\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 417,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 11\n      }, this), sankeyData && sankeyData.nodes.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"realtime-panel full-width graph-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uD83D\\uDD04 Packet Flow: Hook Pipeline \\u2192 Network Layers\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"graph-legend\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"legend-color\",\n              style: {\n                background: 'linear-gradient(90deg, #00ff7f, #90EE90)'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 430,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"0-5% drop (Excellent)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 431,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"legend-color\",\n              style: {\n                background: 'linear-gradient(90deg, #90EE90, #FFD700)'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 434,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"5-10% drop (Good)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 433,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"legend-color\",\n              style: {\n                background: 'linear-gradient(90deg, #FFD700, #FFA500)'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 438,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"10-20% drop (Warning)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 439,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"legend-color\",\n              style: {\n                background: 'linear-gradient(90deg, #FFA500, #FF6347)'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 442,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"20-50% drop (Critical)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 443,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"legend-color\",\n              style: {\n                background: 'linear-gradient(90deg, #FF6347, #FF0000)'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 446,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \">50% drop (Severe)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 447,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Plot, {\n          data: [{\n            type: 'sankey',\n            orientation: 'h',\n            arrangement: 'snap',\n            node: {\n              pad: 15,\n              thickness: 30,\n              line: {\n                color: 'rgba(255, 255, 255, 0.5)',\n                width: 2\n              },\n              label: sankeyData.nodes.map(n => n.label),\n              color: sankeyData.nodes.map(n => n.color),\n              customdata: sankeyData.nodes.map(n => n.customdata),\n              hovertemplate: '%{customdata.tooltip}<extra></extra>',\n              hoverlabel: {\n                bgcolor: 'rgba(0, 0, 0, 0.8)',\n                bordercolor: '#667eea',\n                font: {\n                  size: 12,\n                  color: 'white',\n                  family: 'monospace'\n                }\n              }\n            },\n            link: {\n              source: sankeyData.links.map(l => l.source),\n              target: sankeyData.links.map(l => l.target),\n              value: sankeyData.links.map(l => l.value),\n              color: sankeyData.links.map(l => l.color),\n              customdata: sankeyData.links.map(l => l.customdata),\n              hovertemplate: '%{customdata.tooltip}<extra></extra>',\n              hoverlabel: {\n                bgcolor: 'rgba(0, 0, 0, 0.8)',\n                font: {\n                  size: 11,\n                  color: 'white',\n                  family: 'monospace'\n                }\n              }\n            }\n          }],\n          layout: {\n            font: {\n              size: 11,\n              family: 'Arial, sans-serif'\n            },\n            plot_bgcolor: 'rgba(0, 0, 0, 0.02)',\n            paper_bgcolor: 'transparent',\n            margin: {\n              l: 10,\n              r: 10,\n              t: 10,\n              b: 10\n            },\n            height: 500,\n            hoverlabel: {\n              align: 'left'\n            },\n            // Animation settings\n            transition: {\n              duration: 500,\n              easing: 'cubic-in-out'\n            }\n          },\n          config: {\n            responsive: true,\n            displayModeBar: false,\n            // Smooth animations on data update\n            plotGlPixelRatio: 2\n          },\n          style: {\n            width: '100%',\n            height: '500px'\n          }\n          // Enable animation on updates\n          ,\n          useResizeHandler: true,\n          className: \"sankey-graph-animated\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 451,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"realtime-panels\",\n        children: [stats.hooks && Object.keys(stats.hooks).length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"realtime-panel\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\uD83E\\uDE9D Hook Distribution\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 522,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"hook-bars\",\n            children: Object.entries(stats.hooks).map(([hook, hookData]) => {\n              const maxCount = Math.max(...Object.values(stats.hooks).map(h => h.packets_total || 0));\n              const percentage = maxCount > 0 ? (hookData.packets_total || 0) / maxCount * 100 : 0;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"hook-bar-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"hook-bar-label\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: hook\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 530,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"hook-bar-count\",\n                    children: hookData.packets_total || 0\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 531,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 529,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"hook-bar\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"hook-bar-fill\",\n                    style: {\n                      width: `${percentage}%`,\n                      background: HOOK_COLORS[hook] || '#667eea'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 534,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 533,\n                  columnNumber: 25\n                }, this)]\n              }, hook, true, {\n                fileName: _jsxFileName,\n                lineNumber: 528,\n                columnNumber: 23\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 523,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 521,\n          columnNumber: 15\n        }, this), stats.hooks && Object.keys(stats.hooks).length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"realtime-panel\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\uD83D\\uDCCA Layer Statistics\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 552,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"layer-stats\",\n            children: Object.entries(stats.hooks).map(([hookName, hookData]) => {\n              const layers = hookData.layers || {};\n              if (Object.keys(layers).length === 0) return null;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"layer-stats-section\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: hookName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 560,\n                  columnNumber: 25\n                }, this), Object.entries(layers).map(([layerName, layerData]) => {\n                  var _layerData$drop_rate, _layerData$avg_latenc;\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"layer-stat-item\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"layer-name\",\n                      children: layerName\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 563,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"layer-metrics\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"metric\",\n                        children: [\"\\uD83D\\uDCE5 \", layerData.packets_in || 0, \" pkts\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 565,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: `metric ${layerData.drop_rate > 10 ? 'metric-warning' : ''}`,\n                        children: [\"\\uD83D\\uDD3B \", ((_layerData$drop_rate = layerData.drop_rate) === null || _layerData$drop_rate === void 0 ? void 0 : _layerData$drop_rate.toFixed(1)) || 0, \"%\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 568,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"metric\",\n                        children: [\"\\u23F1\\uFE0F \", ((_layerData$avg_latenc = layerData.avg_latency_ms) === null || _layerData$avg_latenc === void 0 ? void 0 : _layerData$avg_latenc.toFixed(2)) || 0, \" ms\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 571,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 564,\n                      columnNumber: 29\n                    }, this)]\n                  }, layerName, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 562,\n                    columnNumber: 27\n                  }, this);\n                })]\n              }, hookName, true, {\n                fileName: _jsxFileName,\n                lineNumber: 559,\n                columnNumber: 23\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 553,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 551,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 518,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"realtime-panel full-width\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"\\uD83D\\uDCCA Th\\u1ED1ng k\\xEA Realtime\", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"event-count\",\n            children: \"(C\\u1EADp nh\\u1EADt m\\u1ED7i 1 gi\\xE2y)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 589,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 587,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty-events\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\uD83D\\uDCC8 Backend g\\u1EEDi th\\u1ED1ng k\\xEA t\\u1ED5ng h\\u1EE3p m\\u1ED7i 1 gi\\xE2y\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 593,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"hint\",\n            children: \"Graph v\\xE0 metrics \\u0111\\u01B0\\u1EE3c c\\u1EADp nh\\u1EADt t\\u1EF1 \\u0111\\u1ED9ng t\\u1EEB aggregated statistics\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 594,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"hint\",\n            children: \"\\u2728 Hi\\u1EC7u su\\u1EA5t t\\u1ED1i \\u01B0u: kh\\xF4ng g\\u1EEDi t\\u1EEBng event ri\\xEAng l\\u1EBB\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 595,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 592,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 586,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 338,\n    columnNumber: 5\n  }, this);\n}\n_s(RealtimeView, \"M35ZxmgIUr3dl5CENBDtSk/uAP4=\");\n_c = RealtimeView;\nexport default RealtimeView;\nvar _c;\n$RefreshReg$(_c, \"RealtimeView\");","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","io","Plot","jsxDEV","_jsxDEV","Fragment","_Fragment","API_BASE","process","env","REACT_APP_API_BASE","SOCKET_URL","REACT_APP_SOCKET_URL","HOOK_NAMES","HOOK_ORDER","LAYER_ORDER","HOOK_COLORS","VERDICT_COLORS","PROTOCOL_ICONS","getColorFromDropRate","dropRate","buildSankeyData","stats","hooks","nodes","links","nodeMap","Map","nodeIndex","forEach","hookName","hookData","hookTooltip","packets_total","Object","keys","layers","length","push","label","color","customdata","type","name","tooltip","hovertext","hoverinfo","set","layerName","layerData","nodeName","drop_rate","verdictBreakdown","verdict_breakdown","verdictText","entries","map","verdict","count","pct","packets_in","toFixed","join","topFunc","top_function","topFuncCalls","top_function_calls","errorBreakdown","error_breakdown","errorText","filter","_","error","layerTooltip","avg_latency_ms","hook","layer","data","hookIndex","get","layerNodeName","layerIndex","linkTooltip","drops","source","target","value","packets","RealtimeView","_s","_stats$total_packets","_stats$packets_per_se","_stats$uptime_seconds","enabled","setEnabled","connected","setConnected","setStats","loading","setLoading","setError","sankeyData","setSankeyData","socketRef","socket","transports","reconnection","reconnectionDelay","reconnectionAttempts","on","console","log","loadStats","status","current","disconnect","interval","setInterval","clearInterval","res","err","toggleRealtime","post","_err$response","_err$response$data","response","resetStats","formatTimestamp","timestamp","date","Date","toLocaleTimeString","hour12","hour","minute","second","fractionalSecondDigits","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","total_packets","toLocaleString","packets_per_second","uptime_seconds","style","background","orientation","arrangement","node","pad","thickness","line","width","n","hovertemplate","hoverlabel","bgcolor","bordercolor","font","size","family","link","l","layout","plot_bgcolor","paper_bgcolor","margin","r","t","b","height","align","transition","duration","easing","config","responsive","displayModeBar","plotGlPixelRatio","useResizeHandler","maxCount","Math","max","values","h","percentage","_layerData$drop_rate","_layerData$avg_latenc","_c","$RefreshReg$"],"sources":["/home/sean/Downloads/nft-tracer-app/frontend/src/RealtimeView.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport io from 'socket.io-client';\nimport Plot from 'react-plotly.js';\nimport './Realtime.css';\n\nconst API_BASE = process.env.REACT_APP_API_BASE || 'http://localhost:5000/api';\nconst SOCKET_URL = process.env.REACT_APP_SOCKET_URL || 'http://localhost:5000';\n\n// Hook names mapping\nconst HOOK_NAMES = {\n  0: 'PRE_ROUTING',\n  1: 'LOCAL_IN',\n  2: 'FORWARD',\n  3: 'LOCAL_OUT',\n  4: 'POST_ROUTING'\n};\n\n// Hook order for visualization\nconst HOOK_ORDER = ['PRE_ROUTING', 'LOCAL_IN', 'FORWARD', 'LOCAL_OUT', 'POST_ROUTING'];\nconst LAYER_ORDER = ['Ingress', 'L2', 'IP', 'Firewall', 'Socket', 'Egress'];\n\nconst HOOK_COLORS = {\n  'PRE_ROUTING': '#667eea',\n  'LOCAL_IN': '#28a745',\n  'FORWARD': '#ffc107',\n  'LOCAL_OUT': '#dc3545',\n  'POST_ROUTING': '#6c757d',\n  'PREROUTING': '#667eea',\n  'INPUT': '#28a745',\n  'OUTPUT': '#dc3545',\n  'POSTROUTING': '#6c757d'\n};\n\nconst VERDICT_COLORS = {\n  'ACCEPT': '#28a745',\n  'DROP': '#dc3545',\n  'QUEUE': '#ffc107',\n  'STOLEN': '#6c757d',\n  'CONTINUE': '#17a2b8'\n};\n\nconst PROTOCOL_ICONS = {\n  'TCP': 'ðŸ”·',\n  'UDP': 'ðŸ”¶',\n  'ICMP': 'ðŸ“¡',\n  'PROTO_6': 'ðŸ”·',\n  'PROTO_17': 'ðŸ”¶',\n  'PROTO_1': 'ðŸ“¡'\n};\n\n// Color based on drop rate\nfunction getColorFromDropRate(dropRate) {\n  if (dropRate <= 5) {\n    return 'rgba(0, 255, 127, 0.8)'; // Green\n  } else if (dropRate <= 10) {\n    return 'rgba(144, 238, 144, 0.8)'; // Light Green\n  } else if (dropRate <= 20) {\n    return 'rgba(255, 215, 0, 0.8)'; // Gold\n  } else if (dropRate <= 50) {\n    return 'rgba(255, 165, 0, 0.8)'; // Orange\n  } else {\n    return 'rgba(255, 0, 0, 0.8)'; // Red\n  }\n}\n\n// Build Sankey diagram data with rich tooltips\nfunction buildSankeyData(stats) {\n  if (!stats || !stats.hooks) {\n    return { nodes: [], links: [] };\n  }\n\n  const nodes = [];\n  const links = [];\n  const nodeMap = new Map(); // name -> index\n  let nodeIndex = 0;\n\n  // 1. Add Hook nodes vá»›i tooltip text\n  HOOK_ORDER.forEach(hookName => {\n    if (stats.hooks[hookName]) {\n      const hookData = stats.hooks[hookName];\n      \n      // Build tooltip cho hook\n      const hookTooltip = `<b>${hookName} Hook</b><br>` +\n                         `Total Packets: ${hookData.packets_total}<br>` +\n                         `Layers: ${Object.keys(hookData.layers || {}).length}`;\n      \n      nodes.push({\n        label: `<b>${hookName}</b><br>${hookData.packets_total} pkts`,\n        color: 'rgba(100, 150, 255, 0.8)',\n        customdata: { \n          type: 'hook', \n          name: hookName,\n          tooltip: hookTooltip\n        },\n        hovertext: hookTooltip,\n        hoverinfo: 'text'\n      });\n      nodeMap.set(hookName, nodeIndex++);\n    }\n  });\n\n  // 2. Add Layer nodes vá»›i detailed tooltips\n  HOOK_ORDER.forEach(hookName => {\n    const hookData = stats.hooks[hookName];\n    if (!hookData) return;\n\n    const layers = hookData.layers || {};\n    LAYER_ORDER.forEach(layerName => {\n      if (layers[layerName]) {\n        const layerData = layers[layerName];\n        const nodeName = `${hookName}::${layerName}`;\n\n        // Color based on drop rate\n        const color = getColorFromDropRate(layerData.drop_rate || 0);\n\n        // Build detailed tooltip theo yÃªu cáº§u\n        const verdictBreakdown = layerData.verdict_breakdown || {};\n        const verdictText = Object.entries(verdictBreakdown)\n          .map(([verdict, count]) => {\n            const pct = layerData.packets_in > 0 \n              ? ((count / layerData.packets_in) * 100).toFixed(1) \n              : 0;\n            return `${verdict}: ${pct}%`;\n          })\n          .join(', ');\n\n        const topFunc = layerData.top_function || 'N/A';\n        const topFuncCalls = layerData.top_function_calls || 0;\n        \n        const errorBreakdown = layerData.error_breakdown || {};\n        const errorText = Object.entries(errorBreakdown)\n          .filter(([_, count]) => count > 0)\n          .map(([error, count]) => `${error} (${count})`)\n          .join(', ') || 'None';\n\n        const layerTooltip = \n          `<b>${layerName} (${hookName})</b><br>` +\n          `Packets: ${layerData.packets_in}<br>` +\n          `Drop: ${(layerData.drop_rate || 0).toFixed(1)}%<br>` +\n          `Verdicts: ${verdictText || 'N/A'}<br>` +\n          `Top Func: ${topFunc} (${topFuncCalls} calls)<br>` +\n          `Error: ${errorText}<br>` +\n          `Avg latency: ${(layerData.avg_latency_ms || 0).toFixed(2)} ms`;\n\n        nodes.push({\n          label: `<b>${layerName}</b><br>` +\n                 `${layerData.packets_in} pkts<br>` +\n                 `${(layerData.drop_rate || 0).toFixed(1)}% drop<br>` +\n                 `${(layerData.avg_latency_ms || 0).toFixed(2)}ms`,\n          color: color,\n          customdata: {\n            type: 'layer',\n            hook: hookName,\n            layer: layerName,\n            data: layerData,\n            tooltip: layerTooltip\n          },\n          hovertext: layerTooltip,\n          hoverinfo: 'text'\n        });\n        nodeMap.set(nodeName, nodeIndex++);\n      }\n    });\n  });\n\n  // 3. Build links: Hook -> Layer with tooltips\n  HOOK_ORDER.forEach(hookName => {\n    const hookData = stats.hooks[hookName];\n    if (!hookData) return;\n\n    const hookIndex = nodeMap.get(hookName);\n    const layers = hookData.layers || {};\n\n    LAYER_ORDER.forEach(layerName => {\n      if (layers[layerName]) {\n        const layerData = layers[layerName];\n        const layerNodeName = `${hookName}::${layerName}`;\n        const layerIndex = nodeMap.get(layerNodeName);\n\n        const linkTooltip = \n          `${hookName} â†’ ${layerName}<br>` +\n          `Flow: ${layerData.packets_in} packets<br>` +\n          `Dropped: ${layerData.drops || 0}`;\n\n        // Link value = packets_in\n        links.push({\n          source: hookIndex,\n          target: layerIndex,\n          value: layerData.packets_in,\n          color: 'rgba(200, 200, 200, 0.3)',\n          customdata: {\n            hook: hookName,\n            layer: layerName,\n            packets: layerData.packets_in,\n            drops: layerData.drops || 0,\n            tooltip: linkTooltip\n          },\n          hovertext: linkTooltip,\n          hoverinfo: 'text'\n        });\n      }\n    });\n  });\n\n  return { nodes, links };\n}\n\nfunction RealtimeView() {\n  const [enabled, setEnabled] = useState(false);\n  const [connected, setConnected] = useState(false);\n  const [stats, setStats] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [sankeyData, setSankeyData] = useState(null);\n  \n  const socketRef = useRef(null);\n  // Removed: recentEvents and maxEvents - no longer needed\n\n  // Initialize Socket.IO connection\n  useEffect(() => {\n    const socket = io(SOCKET_URL, {\n      transports: ['websocket', 'polling'],\n      reconnection: true,\n      reconnectionDelay: 1000,\n      reconnectionAttempts: 5\n    });\n\n    socket.on('connect', () => {\n      console.log('[Realtime] Connected to WebSocket');\n      setConnected(true);\n      loadStats();\n    });\n\n    socket.on('disconnect', () => {\n      console.log('[Realtime] Disconnected from WebSocket');\n      setConnected(false);\n    });\n\n    // Removed packet_event listener - only use stats_update now\n    // socket.on('packet_event', ...) \n    // We now rely on stats_update every 1s for visualization\n\n    socket.on('stats_update', (stats) => {\n      console.log('[Realtime] Received stats_update:', stats);\n      setStats(stats);\n      \n      // Build Sankey data\n      const { nodes, links } = buildSankeyData(stats);\n      if (nodes.length > 0) {\n        setSankeyData({ nodes, links });\n      }\n    });\n\n    socket.on('status', (status) => {\n      setEnabled(status.enabled);\n    });\n\n    socketRef.current = socket;\n\n    return () => {\n      socket.disconnect();\n    };\n  }, []);\n\n  // Load stats periodically - every 1 second to match backend emission\n  useEffect(() => {\n    if (enabled && connected) {\n      const interval = setInterval(loadStats, 1000);\n      return () => clearInterval(interval);\n    }\n  }, [enabled, connected]);\n\n  const loadStats = async () => {\n    try {\n      const res = await axios.get(`${API_BASE}/realtime/stats`);\n      setStats(res.data);\n      setEnabled(res.data.enabled);\n      \n      // Build Sankey data\n      if (res.data && res.data.hooks) {\n        const { nodes, links } = buildSankeyData(res.data);\n        if (nodes.length > 0) {\n          setSankeyData({ nodes, links });\n        }\n      }\n    } catch (err) {\n      console.error('Error loading realtime stats:', err);\n    }\n  };\n\n  const toggleRealtime = async () => {\n    setLoading(true);\n    setError(null);\n    \n    try {\n      if (enabled) {\n        await axios.post(`${API_BASE}/realtime/disable`);\n        setEnabled(false);\n        setSankeyData(null);\n      } else {\n        await axios.post(`${API_BASE}/realtime/enable`);\n        setEnabled(true);\n      }\n      await loadStats();\n    } catch (err) {\n      setError(err.response?.data?.error || 'Failed to toggle realtime');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const resetStats = async () => {\n    setLoading(true);\n    try {\n      await axios.post(`${API_BASE}/realtime/reset`);\n      setSankeyData(null);\n      await loadStats();\n    } catch (err) {\n      setError('Failed to reset stats');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const formatTimestamp = (timestamp) => {\n    const date = new Date(timestamp * 1000);\n    return date.toLocaleTimeString('en-US', { \n      hour12: false, \n      hour: '2-digit', \n      minute: '2-digit', \n      second: '2-digit',\n      fractionalSecondDigits: 3 \n    });\n  };\n\n  return (\n    <div className=\"realtime-container\">\n      {error && (\n        <div className=\"realtime-error\">\n          <strong>âš ï¸ Error:</strong> {error}\n          <button onClick={() => setError(null)}>âœ•</button>\n        </div>\n      )}\n\n      {/* Header Controls */}\n      <div className=\"realtime-header\">\n        <div className=\"realtime-header-left\">\n          <h2>ðŸŽ¥ Realtime Packet Visualization</h2>\n          <div className=\"connection-status\">\n            <span className={`status-dot ${connected ? 'connected' : 'disconnected'}`}></span>\n            <span>{connected ? 'Connected' : 'Disconnected'}</span>\n          </div>\n        </div>\n        \n        <div className=\"realtime-header-right\">\n          <button\n            className={`btn ${enabled ? 'btn-danger' : 'btn-primary'}`}\n            onClick={toggleRealtime}\n            disabled={loading || !connected}\n          >\n            {loading ? 'â³ Loading...' : enabled ? 'â¸ï¸ Disable' : 'â–¶ï¸ Enable'}\n          </button>\n          \n          {enabled && (\n            <button\n              className=\"btn btn-secondary\"\n              onClick={resetStats}\n              disabled={loading}\n            >\n              ðŸ”„ Reset Stats\n            </button>\n          )}\n        </div>\n      </div>\n\n      {!enabled && (\n        <div className=\"realtime-disabled-notice\">\n          <h3>ðŸ“º Realtime Visualization Disabled</h3>\n          <p>Click \"Enable\" to start capturing live packet events</p>\n          <p className=\"hint\">\n            ðŸ’¡ Tip: Enable realtime to see live packet flows through hooks and layers\n          </p>\n        </div>\n      )}\n\n      {enabled && stats && (\n        <>\n          {/* Statistics Dashboard */}\n          <div className=\"realtime-stats-grid\">\n            <div className=\"realtime-stat-card primary\">\n              <div className=\"stat-icon\">ðŸ“Š</div>\n              <div className=\"stat-content\">\n                <div className=\"stat-value\">{stats.total_packets?.toLocaleString() || 0}</div>\n                <div className=\"stat-label\">Total Packets</div>\n              </div>\n            </div>\n\n            <div className=\"realtime-stat-card success\">\n              <div className=\"stat-icon\">âš¡</div>\n              <div className=\"stat-content\">\n                <div className=\"stat-value\">{stats.packets_per_second?.toFixed(1) || 0}</div>\n                <div className=\"stat-label\">Packets/Second</div>\n              </div>\n            </div>\n\n            <div className=\"realtime-stat-card warning\">\n              <div className=\"stat-icon\">â±ï¸</div>\n              <div className=\"stat-content\">\n                <div className=\"stat-value\">{stats.uptime_seconds?.toFixed(0) || 0}s</div>\n                <div className=\"stat-label\">Uptime</div>\n              </div>\n            </div>\n\n            <div className=\"realtime-stat-card info\">\n              <div className=\"stat-icon\">ðŸª</div>\n              <div className=\"stat-content\">\n                <div className=\"stat-value\">{Object.keys(stats.hooks || {}).length}</div>\n                <div className=\"stat-label\">Active Hooks</div>\n              </div>\n            </div>\n          </div>\n\n          {/* 2-LEVEL SANKEY DIAGRAM: Hook â†’ Layer */}\n          {sankeyData && sankeyData.nodes.length > 0 && (\n            <div className=\"realtime-panel full-width graph-panel\">\n              <h3>ðŸ”„ Packet Flow: Hook Pipeline â†’ Network Layers</h3>\n              <div className=\"graph-legend\">\n                <div className=\"legend-item\">\n                  <div className=\"legend-color\" style={{ background: 'linear-gradient(90deg, #00ff7f, #90EE90)' }}></div>\n                  <span>0-5% drop (Excellent)</span>\n                </div>\n                <div className=\"legend-item\">\n                  <div className=\"legend-color\" style={{ background: 'linear-gradient(90deg, #90EE90, #FFD700)' }}></div>\n                  <span>5-10% drop (Good)</span>\n                </div>\n                <div className=\"legend-item\">\n                  <div className=\"legend-color\" style={{ background: 'linear-gradient(90deg, #FFD700, #FFA500)' }}></div>\n                  <span>10-20% drop (Warning)</span>\n                </div>\n                <div className=\"legend-item\">\n                  <div className=\"legend-color\" style={{ background: 'linear-gradient(90deg, #FFA500, #FF6347)' }}></div>\n                  <span>20-50% drop (Critical)</span>\n                </div>\n                <div className=\"legend-item\">\n                  <div className=\"legend-color\" style={{ background: 'linear-gradient(90deg, #FF6347, #FF0000)' }}></div>\n                  <span>&gt;50% drop (Severe)</span>\n                </div>\n              </div>\n              \n              <Plot\n                data={[\n                  {\n                    type: 'sankey',\n                    orientation: 'h',\n                    arrangement: 'snap',\n                    node: {\n                      pad: 15,\n                      thickness: 30,\n                      line: {\n                        color: 'rgba(255, 255, 255, 0.5)',\n                        width: 2\n                      },\n                      label: sankeyData.nodes.map(n => n.label),\n                      color: sankeyData.nodes.map(n => n.color),\n                      customdata: sankeyData.nodes.map(n => n.customdata),\n                      hovertemplate: '%{customdata.tooltip}<extra></extra>',\n                      hoverlabel: {\n                        bgcolor: 'rgba(0, 0, 0, 0.8)',\n                        bordercolor: '#667eea',\n                        font: { size: 12, color: 'white', family: 'monospace' }\n                      }\n                    },\n                    link: {\n                      source: sankeyData.links.map(l => l.source),\n                      target: sankeyData.links.map(l => l.target),\n                      value: sankeyData.links.map(l => l.value),\n                      color: sankeyData.links.map(l => l.color),\n                      customdata: sankeyData.links.map(l => l.customdata),\n                      hovertemplate: '%{customdata.tooltip}<extra></extra>',\n                      hoverlabel: {\n                        bgcolor: 'rgba(0, 0, 0, 0.8)',\n                        font: { size: 11, color: 'white', family: 'monospace' }\n                      }\n                    }\n                  }\n                ]}\n                layout={{\n                  font: { size: 11, family: 'Arial, sans-serif' },\n                  plot_bgcolor: 'rgba(0, 0, 0, 0.02)',\n                  paper_bgcolor: 'transparent',\n                  margin: { l: 10, r: 10, t: 10, b: 10 },\n                  height: 500,\n                  hoverlabel: {\n                    align: 'left'\n                  },\n                  // Animation settings\n                  transition: {\n                    duration: 500,\n                    easing: 'cubic-in-out'\n                  }\n                }}\n                config={{\n                  responsive: true,\n                  displayModeBar: false,\n                  // Smooth animations on data update\n                  plotGlPixelRatio: 2\n                }}\n                style={{ width: '100%', height: '500px' }}\n                // Enable animation on updates\n                useResizeHandler={true}\n                className=\"sankey-graph-animated\"\n              />\n            </div>\n          )}\n\n          {/* Visualization Panels */}\n          <div className=\"realtime-panels\">\n            {/* Hook Distribution */}\n            {stats.hooks && Object.keys(stats.hooks).length > 0 && (\n              <div className=\"realtime-panel\">\n                <h3>ðŸª Hook Distribution</h3>\n                <div className=\"hook-bars\">\n                  {Object.entries(stats.hooks).map(([hook, hookData]) => {\n                    const maxCount = Math.max(...Object.values(stats.hooks).map(h => h.packets_total || 0));\n                    const percentage = maxCount > 0 ? ((hookData.packets_total || 0) / maxCount) * 100 : 0;\n                    return (\n                      <div key={hook} className=\"hook-bar-item\">\n                        <div className=\"hook-bar-label\">\n                          <span>{hook}</span>\n                          <span className=\"hook-bar-count\">{hookData.packets_total || 0}</span>\n                        </div>\n                        <div className=\"hook-bar\">\n                          <div \n                            className=\"hook-bar-fill\" \n                            style={{ \n                              width: `${percentage}%`,\n                              background: HOOK_COLORS[hook] || '#667eea'\n                            }}\n                          />\n                        </div>\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n            )}\n\n            {/* Layer Statistics */}\n            {stats.hooks && Object.keys(stats.hooks).length > 0 && (\n              <div className=\"realtime-panel\">\n                <h3>ðŸ“Š Layer Statistics</h3>\n                <div className=\"layer-stats\">\n                  {Object.entries(stats.hooks).map(([hookName, hookData]) => {\n                    const layers = hookData.layers || {};\n                    if (Object.keys(layers).length === 0) return null;\n                    \n                    return (\n                      <div key={hookName} className=\"layer-stats-section\">\n                        <h4>{hookName}</h4>\n                        {Object.entries(layers).map(([layerName, layerData]) => (\n                          <div key={layerName} className=\"layer-stat-item\">\n                            <div className=\"layer-name\">{layerName}</div>\n                            <div className=\"layer-metrics\">\n                              <span className=\"metric\">\n                                ðŸ“¥ {layerData.packets_in || 0} pkts\n                              </span>\n                              <span className={`metric ${layerData.drop_rate > 10 ? 'metric-warning' : ''}`}>\n                                ðŸ”» {layerData.drop_rate?.toFixed(1) || 0}%\n                              </span>\n                              <span className=\"metric\">\n                                â±ï¸ {layerData.avg_latency_ms?.toFixed(2) || 0} ms\n                              </span>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Statistics Info - No Individual Events */}\n          <div className=\"realtime-panel full-width\">\n            <h3>\n              ðŸ“Š Thá»‘ng kÃª Realtime\n              <span className=\"event-count\">(Cáº­p nháº­t má»—i 1 giÃ¢y)</span>\n            </h3>\n            \n            <div className=\"empty-events\">\n              <p>ðŸ“ˆ Backend gá»­i thá»‘ng kÃª tá»•ng há»£p má»—i 1 giÃ¢y</p>\n              <p className=\"hint\">Graph vÃ  metrics Ä‘Æ°á»£c cáº­p nháº­t tá»± Ä‘á»™ng tá»« aggregated statistics</p>\n              <p className=\"hint\">âœ¨ Hiá»‡u suáº¥t tá»‘i Æ°u: khÃ´ng gá»­i tá»«ng event riÃªng láº»</p>\n            </div>\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default RealtimeView;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}