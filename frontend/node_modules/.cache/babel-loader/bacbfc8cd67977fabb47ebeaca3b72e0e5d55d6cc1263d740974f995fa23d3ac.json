{"ast":null,"code":"var _jsxFileName = \"/home/sean/Downloads/nft-tracer-app/frontend/src/RealtimeView.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport io from 'socket.io-client';\nimport Plot from 'react-plotly.js';\nimport './Realtime.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_BASE = process.env.REACT_APP_API_BASE || 'http://localhost:5000/api';\nconst SOCKET_URL = process.env.REACT_APP_SOCKET_URL || 'http://localhost:5000';\n\n// Hook names mapping\nconst HOOK_NAMES = {\n  0: 'PRE_ROUTING',\n  1: 'LOCAL_IN',\n  2: 'FORWARD',\n  3: 'LOCAL_OUT',\n  4: 'POST_ROUTING'\n};\n\n// Hook order for visualization\nconst HOOK_ORDER = ['PRE_ROUTING', 'LOCAL_IN', 'FORWARD', 'LOCAL_OUT', 'POST_ROUTING'];\nconst LAYER_ORDER = ['Ingress', 'L2', 'IP', 'Firewall', 'Socket', 'Egress'];\nconst HOOK_COLORS = {\n  'PRE_ROUTING': '#667eea',\n  'LOCAL_IN': '#28a745',\n  'FORWARD': '#ffc107',\n  'LOCAL_OUT': '#dc3545',\n  'POST_ROUTING': '#6c757d',\n  'PREROUTING': '#667eea',\n  'INPUT': '#28a745',\n  'OUTPUT': '#dc3545',\n  'POSTROUTING': '#6c757d'\n};\nconst VERDICT_COLORS = {\n  'ACCEPT': '#28a745',\n  'DROP': '#dc3545',\n  'QUEUE': '#ffc107',\n  'STOLEN': '#6c757d',\n  'CONTINUE': '#17a2b8'\n};\nconst PROTOCOL_ICONS = {\n  'TCP': 'üî∑',\n  'UDP': 'üî∂',\n  'ICMP': 'üì°',\n  'PROTO_6': 'üî∑',\n  'PROTO_17': 'üî∂',\n  'PROTO_1': 'üì°'\n};\n\n// Color based on drop rate\nfunction getColorFromDropRate(dropRate) {\n  if (dropRate <= 5) {\n    return 'rgba(0, 255, 127, 0.8)'; // Green\n  } else if (dropRate <= 10) {\n    return 'rgba(144, 238, 144, 0.8)'; // Light Green\n  } else if (dropRate <= 20) {\n    return 'rgba(255, 215, 0, 0.8)'; // Gold\n  } else if (dropRate <= 50) {\n    return 'rgba(255, 165, 0, 0.8)'; // Orange\n  } else {\n    return 'rgba(255, 0, 0, 0.8)'; // Red\n  }\n}\n\n// Build Sankey diagram data\nfunction buildSankeyData(stats) {\n  if (!stats || !stats.hooks) {\n    return {\n      nodes: [],\n      links: []\n    };\n  }\n  const nodes = [];\n  const links = [];\n  const nodeMap = new Map(); // name -> index\n  let nodeIndex = 0;\n\n  // 1. Add Hook nodes\n  HOOK_ORDER.forEach(hookName => {\n    if (stats.hooks[hookName]) {\n      const hookData = stats.hooks[hookName];\n      nodes.push({\n        label: `<b>${hookName}</b><br>${hookData.packets_total} pkts`,\n        color: 'rgba(100, 150, 255, 0.8)',\n        customdata: {\n          type: 'hook',\n          name: hookName\n        }\n      });\n      nodeMap.set(hookName, nodeIndex++);\n    }\n  });\n\n  // 2. Add Layer nodes (for each hook)\n  HOOK_ORDER.forEach(hookName => {\n    const hookData = stats.hooks[hookName];\n    if (!hookData) return;\n    const layers = hookData.layers || {};\n    LAYER_ORDER.forEach(layerName => {\n      if (layers[layerName]) {\n        var _layerData$drop_rate;\n        const layerData = layers[layerName];\n        const nodeName = `${hookName}::${layerName}`;\n\n        // Color based on drop rate\n        const color = getColorFromDropRate(layerData.drop_rate || 0);\n        nodes.push({\n          label: `<b>${layerName}</b><br>${layerData.packets_in} pkts<br>${((_layerData$drop_rate = layerData.drop_rate) === null || _layerData$drop_rate === void 0 ? void 0 : _layerData$drop_rate.toFixed(1)) || 0}% drop`,\n          color: color,\n          customdata: {\n            type: 'layer',\n            hook: hookName,\n            layer: layerName,\n            data: layerData\n          }\n        });\n        nodeMap.set(nodeName, nodeIndex++);\n      }\n    });\n  });\n\n  // 3. Build links: Hook -> Layer\n  HOOK_ORDER.forEach(hookName => {\n    const hookData = stats.hooks[hookName];\n    if (!hookData) return;\n    const hookIndex = nodeMap.get(hookName);\n    const layers = hookData.layers || {};\n    LAYER_ORDER.forEach(layerName => {\n      if (layers[layerName]) {\n        const layerData = layers[layerName];\n        const layerNodeName = `${hookName}::${layerName}`;\n        const layerIndex = nodeMap.get(layerNodeName);\n\n        // Link value = packets_in\n        links.push({\n          source: hookIndex,\n          target: layerIndex,\n          value: layerData.packets_in,\n          color: 'rgba(200, 200, 200, 0.3)',\n          customdata: {\n            hook: hookName,\n            layer: layerName,\n            packets: layerData.packets_in,\n            drops: layerData.drops || 0\n          }\n        });\n      }\n    });\n  });\n  return {\n    nodes,\n    links\n  };\n}\nfunction RealtimeView() {\n  _s();\n  var _stats$total_packets, _stats$packets_per_se, _stats$uptime_seconds;\n  const [enabled, setEnabled] = useState(false);\n  const [connected, setConnected] = useState(false);\n  const [stats, setStats] = useState(null);\n  const [recentEvents, setRecentEvents] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [sankeyData, setSankeyData] = useState(null);\n  const socketRef = useRef(null);\n  const maxEvents = 50;\n\n  // Initialize Socket.IO connection\n  useEffect(() => {\n    const socket = io(SOCKET_URL, {\n      transports: ['websocket', 'polling'],\n      reconnection: true,\n      reconnectionDelay: 1000,\n      reconnectionAttempts: 5\n    });\n    socket.on('connect', () => {\n      console.log('[Realtime] Connected to WebSocket');\n      setConnected(true);\n      loadStats();\n    });\n    socket.on('disconnect', () => {\n      console.log('[Realtime] Disconnected from WebSocket');\n      setConnected(false);\n    });\n    socket.on('packet_event', event => {\n      setRecentEvents(prev => {\n        const newEvents = [event, ...prev].slice(0, maxEvents);\n        return newEvents;\n      });\n    });\n    socket.on('stats_update', stats => {\n      console.log('[Realtime] Received stats_update:', stats);\n      setStats(stats);\n\n      // Build Sankey data\n      const {\n        nodes,\n        links\n      } = buildSankeyData(stats);\n      if (nodes.length > 0) {\n        setSankeyData({\n          nodes,\n          links\n        });\n      }\n    });\n    socket.on('status', status => {\n      setEnabled(status.enabled);\n    });\n    socketRef.current = socket;\n    return () => {\n      socket.disconnect();\n    };\n  }, []);\n\n  // Load stats periodically\n  useEffect(() => {\n    if (enabled && connected) {\n      const interval = setInterval(loadStats, 2000);\n      return () => clearInterval(interval);\n    }\n  }, [enabled, connected]);\n  const loadStats = async () => {\n    try {\n      const res = await axios.get(`${API_BASE}/realtime/stats`);\n      setStats(res.data);\n      setEnabled(res.data.enabled);\n\n      // Build Sankey data\n      if (res.data && res.data.hooks) {\n        const {\n          nodes,\n          links\n        } = buildSankeyData(res.data);\n        if (nodes.length > 0) {\n          setSankeyData({\n            nodes,\n            links\n          });\n        }\n      }\n    } catch (err) {\n      console.error('Error loading realtime stats:', err);\n    }\n  };\n  const toggleRealtime = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      if (enabled) {\n        await axios.post(`${API_BASE}/realtime/disable`);\n        setEnabled(false);\n        setRecentEvents([]);\n        setSankeyData(null);\n      } else {\n        await axios.post(`${API_BASE}/realtime/enable`);\n        setEnabled(true);\n      }\n      await loadStats();\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || 'Failed to toggle realtime');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const resetStats = async () => {\n    setLoading(true);\n    try {\n      await axios.post(`${API_BASE}/realtime/reset`);\n      setRecentEvents([]);\n      setSankeyData(null);\n      await loadStats();\n    } catch (err) {\n      setError('Failed to reset stats');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const formatTimestamp = timestamp => {\n    const date = new Date(timestamp * 1000);\n    return date.toLocaleTimeString('en-US', {\n      hour12: false,\n      hour: '2-digit',\n      minute: '2-digit',\n      second: '2-digit',\n      fractionalSecondDigits: 3\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"realtime-container\",\n    children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"realtime-error\",\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"\\u26A0\\uFE0F Error:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 11\n      }, this), \" \", error, /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setError(null),\n        children: \"\\u2715\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"realtime-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"realtime-header-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\uD83C\\uDFA5 Realtime Packet Visualization\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"connection-status\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: `status-dot ${connected ? 'connected' : 'disconnected'}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: connected ? 'Connected' : 'Disconnected'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"realtime-header-right\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `btn ${enabled ? 'btn-danger' : 'btn-primary'}`,\n          onClick: toggleRealtime,\n          disabled: loading || !connected,\n          children: loading ? '‚è≥ Loading...' : enabled ? '‚è∏Ô∏è Disable' : '‚ñ∂Ô∏è Enable'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 11\n        }, this), enabled && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-secondary\",\n          onClick: resetStats,\n          disabled: loading,\n          children: \"\\uD83D\\uDD04 Reset Stats\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 7\n    }, this), !enabled && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"realtime-disabled-notice\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\uD83D\\uDCFA Realtime Visualization Disabled\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Click \\\"Enable\\\" to start capturing live packet events\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"hint\",\n        children: \"\\uD83D\\uDCA1 Tip: Enable realtime to see live packet flows through hooks and layers\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 9\n    }, this), enabled && stats && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"realtime-stats-grid\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"realtime-stat-card primary\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-icon\",\n            children: \"\\uD83D\\uDCCA\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-value\",\n              children: ((_stats$total_packets = stats.total_packets) === null || _stats$total_packets === void 0 ? void 0 : _stats$total_packets.toLocaleString()) || 0\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-label\",\n              children: \"Total Packets\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"realtime-stat-card success\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-icon\",\n            children: \"\\u26A1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-value\",\n              children: ((_stats$packets_per_se = stats.packets_per_second) === null || _stats$packets_per_se === void 0 ? void 0 : _stats$packets_per_se.toFixed(1)) || 0\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-label\",\n              children: \"Packets/Second\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"realtime-stat-card warning\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-icon\",\n            children: \"\\u23F1\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-value\",\n              children: [((_stats$uptime_seconds = stats.uptime_seconds) === null || _stats$uptime_seconds === void 0 ? void 0 : _stats$uptime_seconds.toFixed(0)) || 0, \"s\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-label\",\n              children: \"Uptime\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"realtime-stat-card info\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-icon\",\n            children: \"\\uD83E\\uDE9D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-value\",\n              children: Object.keys(stats.hooks || {}).length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-label\",\n              children: \"Active Hooks\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 11\n      }, this), sankeyData && sankeyData.nodes.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"realtime-panel full-width graph-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uD83D\\uDD04 Packet Flow: Hook Pipeline \\u2192 Network Layers\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"graph-legend\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"legend-color\",\n              style: {\n                background: 'linear-gradient(90deg, #00ff7f, #90EE90)'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"0-5% drop (Excellent)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"legend-color\",\n              style: {\n                background: 'linear-gradient(90deg, #90EE90, #FFD700)'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"5-10% drop (Good)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"legend-color\",\n              style: {\n                background: 'linear-gradient(90deg, #FFD700, #FFA500)'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"10-20% drop (Warning)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"legend-color\",\n              style: {\n                background: 'linear-gradient(90deg, #FFA500, #FF6347)'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"20-50% drop (Critical)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"legend-color\",\n              style: {\n                background: 'linear-gradient(90deg, #FF6347, #FF0000)'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \">50% drop (Severe)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Plot, {\n          data: [{\n            type: 'sankey',\n            orientation: 'h',\n            node: {\n              pad: 15,\n              thickness: 30,\n              line: {\n                color: 'rgba(255, 255, 255, 0.5)',\n                width: 2\n              },\n              label: sankeyData.nodes.map(n => n.label),\n              color: sankeyData.nodes.map(n => n.color),\n              customdata: sankeyData.nodes.map(n => n.customdata)\n            },\n            link: {\n              source: sankeyData.links.map(l => l.source),\n              target: sankeyData.links.map(l => l.target),\n              value: sankeyData.links.map(l => l.value),\n              color: sankeyData.links.map(l => l.color),\n              customdata: sankeyData.links.map(l => l.customdata)\n            }\n          }],\n          layout: {\n            font: {\n              size: 11\n            },\n            plot_bgcolor: 'rgba(0, 0, 0, 0.02)',\n            paper_bgcolor: 'transparent',\n            margin: {\n              l: 10,\n              r: 10,\n              t: 10,\n              b: 10\n            },\n            height: 500\n          },\n          config: {\n            responsive: true,\n            displayModeBar: false\n          },\n          style: {\n            width: '100%',\n            height: '500px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"realtime-panels\",\n        children: [stats.hooks && Object.keys(stats.hooks).length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"realtime-panel\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\uD83E\\uDE9D Hook Distribution\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 448,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"hook-bars\",\n            children: Object.entries(stats.hooks).map(([hook, hookData]) => {\n              const maxCount = Math.max(...Object.values(stats.hooks).map(h => h.packets_total || 0));\n              const percentage = maxCount > 0 ? (hookData.packets_total || 0) / maxCount * 100 : 0;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"hook-bar-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"hook-bar-label\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: hook\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 456,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"hook-bar-count\",\n                    children: hookData.packets_total || 0\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 457,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 455,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"hook-bar\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"hook-bar-fill\",\n                    style: {\n                      width: `${percentage}%`,\n                      background: HOOK_COLORS[hook] || '#667eea'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 460,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 459,\n                  columnNumber: 25\n                }, this)]\n              }, hook, true, {\n                fileName: _jsxFileName,\n                lineNumber: 454,\n                columnNumber: 23\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 15\n        }, this), stats.hooks && Object.keys(stats.hooks).length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"realtime-panel\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\uD83D\\uDCCA Layer Statistics\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 478,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"layer-stats\",\n            children: Object.entries(stats.hooks).map(([hookName, hookData]) => {\n              const layers = hookData.layers || {};\n              if (Object.keys(layers).length === 0) return null;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"layer-stats-section\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: hookName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 486,\n                  columnNumber: 25\n                }, this), Object.entries(layers).map(([layerName, layerData]) => {\n                  var _layerData$drop_rate2, _layerData$avg_latenc;\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"layer-stat-item\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"layer-name\",\n                      children: layerName\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 489,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"layer-metrics\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"metric\",\n                        children: [\"\\uD83D\\uDCE5 \", layerData.packets_in || 0, \" pkts\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 491,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: `metric ${layerData.drop_rate > 10 ? 'metric-warning' : ''}`,\n                        children: [\"\\uD83D\\uDD3B \", ((_layerData$drop_rate2 = layerData.drop_rate) === null || _layerData$drop_rate2 === void 0 ? void 0 : _layerData$drop_rate2.toFixed(1)) || 0, \"%\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 494,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"metric\",\n                        children: [\"\\u23F1\\uFE0F \", ((_layerData$avg_latenc = layerData.avg_latency_ms) === null || _layerData$avg_latenc === void 0 ? void 0 : _layerData$avg_latenc.toFixed(2)) || 0, \" ms\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 497,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 490,\n                      columnNumber: 29\n                    }, this)]\n                  }, layerName, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 488,\n                    columnNumber: 27\n                  }, this);\n                })]\n              }, hookName, true, {\n                fileName: _jsxFileName,\n                lineNumber: 485,\n                columnNumber: 23\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 479,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"realtime-panel full-width\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"\\uD83D\\uDCE1 Live Event Stream\", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"event-count\",\n            children: [\"(\", recentEvents.length, \"/\", maxEvents, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 515,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 513,\n          columnNumber: 13\n        }, this), recentEvents.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty-events\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u23F3 Waiting for events...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 520,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"hint\",\n            children: \"Generate some traffic to see live packet flows\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 521,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 519,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"events-stream\",\n          children: recentEvents.map((event, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"event-item\",\n            style: {\n              animationDelay: `${idx * 0.02}s`\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"event-time\",\n              children: formatTimestamp(event.timestamp)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 527,\n              columnNumber: 21\n            }, this), event.hook_name && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"event-hook\",\n              style: {\n                background: HOOK_COLORS[event.hook_name] || '#667eea'\n              },\n              children: event.hook_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 530,\n              columnNumber: 23\n            }, this), event.layer && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"event-layer\",\n              children: event.layer\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 539,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"event-function\",\n              children: event.function || 'unknown'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 542,\n              columnNumber: 21\n            }, this), event.protocol_name && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"event-protocol\",\n              children: [PROTOCOL_ICONS[event.protocol_name] || 'üì¶', \" \", event.protocol_name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 545,\n              columnNumber: 23\n            }, this), event.src_ip && event.dst_ip && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"event-flow\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"event-ip\",\n                children: event.src_ip\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 552,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"event-arrow\",\n                children: \"\\u2192\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 553,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"event-ip\",\n                children: event.dst_ip\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 554,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 551,\n              columnNumber: 23\n            }, this), event.verdict_name && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"event-verdict\",\n              style: {\n                background: VERDICT_COLORS[event.verdict_name] || '#6c757d'\n              },\n              children: event.verdict_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 559,\n              columnNumber: 23\n            }, this)]\n          }, idx, true, {\n            fileName: _jsxFileName,\n            lineNumber: 526,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 524,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 289,\n    columnNumber: 5\n  }, this);\n}\n_s(RealtimeView, \"PbLz4VKsltEebV76OapBLhQCE4w=\");\n_c = RealtimeView;\nexport default RealtimeView;\nvar _c;\n$RefreshReg$(_c, \"RealtimeView\");","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","io","Plot","jsxDEV","_jsxDEV","Fragment","_Fragment","API_BASE","process","env","REACT_APP_API_BASE","SOCKET_URL","REACT_APP_SOCKET_URL","HOOK_NAMES","HOOK_ORDER","LAYER_ORDER","HOOK_COLORS","VERDICT_COLORS","PROTOCOL_ICONS","getColorFromDropRate","dropRate","buildSankeyData","stats","hooks","nodes","links","nodeMap","Map","nodeIndex","forEach","hookName","hookData","push","label","packets_total","color","customdata","type","name","set","layers","layerName","_layerData$drop_rate","layerData","nodeName","drop_rate","packets_in","toFixed","hook","layer","data","hookIndex","get","layerNodeName","layerIndex","source","target","value","packets","drops","RealtimeView","_s","_stats$total_packets","_stats$packets_per_se","_stats$uptime_seconds","enabled","setEnabled","connected","setConnected","setStats","recentEvents","setRecentEvents","loading","setLoading","error","setError","sankeyData","setSankeyData","socketRef","maxEvents","socket","transports","reconnection","reconnectionDelay","reconnectionAttempts","on","console","log","loadStats","event","prev","newEvents","slice","length","status","current","disconnect","interval","setInterval","clearInterval","res","err","toggleRealtime","post","_err$response","_err$response$data","response","resetStats","formatTimestamp","timestamp","date","Date","toLocaleTimeString","hour12","hour","minute","second","fractionalSecondDigits","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","total_packets","toLocaleString","packets_per_second","uptime_seconds","Object","keys","style","background","orientation","node","pad","thickness","line","width","map","n","link","l","layout","font","size","plot_bgcolor","paper_bgcolor","margin","r","t","b","height","config","responsive","displayModeBar","entries","maxCount","Math","max","values","h","percentage","_layerData$drop_rate2","_layerData$avg_latenc","avg_latency_ms","idx","animationDelay","hook_name","function","protocol_name","src_ip","dst_ip","verdict_name","_c","$RefreshReg$"],"sources":["/home/sean/Downloads/nft-tracer-app/frontend/src/RealtimeView.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport io from 'socket.io-client';\nimport Plot from 'react-plotly.js';\nimport './Realtime.css';\n\nconst API_BASE = process.env.REACT_APP_API_BASE || 'http://localhost:5000/api';\nconst SOCKET_URL = process.env.REACT_APP_SOCKET_URL || 'http://localhost:5000';\n\n// Hook names mapping\nconst HOOK_NAMES = {\n  0: 'PRE_ROUTING',\n  1: 'LOCAL_IN',\n  2: 'FORWARD',\n  3: 'LOCAL_OUT',\n  4: 'POST_ROUTING'\n};\n\n// Hook order for visualization\nconst HOOK_ORDER = ['PRE_ROUTING', 'LOCAL_IN', 'FORWARD', 'LOCAL_OUT', 'POST_ROUTING'];\nconst LAYER_ORDER = ['Ingress', 'L2', 'IP', 'Firewall', 'Socket', 'Egress'];\n\nconst HOOK_COLORS = {\n  'PRE_ROUTING': '#667eea',\n  'LOCAL_IN': '#28a745',\n  'FORWARD': '#ffc107',\n  'LOCAL_OUT': '#dc3545',\n  'POST_ROUTING': '#6c757d',\n  'PREROUTING': '#667eea',\n  'INPUT': '#28a745',\n  'OUTPUT': '#dc3545',\n  'POSTROUTING': '#6c757d'\n};\n\nconst VERDICT_COLORS = {\n  'ACCEPT': '#28a745',\n  'DROP': '#dc3545',\n  'QUEUE': '#ffc107',\n  'STOLEN': '#6c757d',\n  'CONTINUE': '#17a2b8'\n};\n\nconst PROTOCOL_ICONS = {\n  'TCP': 'üî∑',\n  'UDP': 'üî∂',\n  'ICMP': 'üì°',\n  'PROTO_6': 'üî∑',\n  'PROTO_17': 'üî∂',\n  'PROTO_1': 'üì°'\n};\n\n// Color based on drop rate\nfunction getColorFromDropRate(dropRate) {\n  if (dropRate <= 5) {\n    return 'rgba(0, 255, 127, 0.8)'; // Green\n  } else if (dropRate <= 10) {\n    return 'rgba(144, 238, 144, 0.8)'; // Light Green\n  } else if (dropRate <= 20) {\n    return 'rgba(255, 215, 0, 0.8)'; // Gold\n  } else if (dropRate <= 50) {\n    return 'rgba(255, 165, 0, 0.8)'; // Orange\n  } else {\n    return 'rgba(255, 0, 0, 0.8)'; // Red\n  }\n}\n\n// Build Sankey diagram data\nfunction buildSankeyData(stats) {\n  if (!stats || !stats.hooks) {\n    return { nodes: [], links: [] };\n  }\n\n  const nodes = [];\n  const links = [];\n  const nodeMap = new Map(); // name -> index\n  let nodeIndex = 0;\n\n  // 1. Add Hook nodes\n  HOOK_ORDER.forEach(hookName => {\n    if (stats.hooks[hookName]) {\n      const hookData = stats.hooks[hookName];\n      nodes.push({\n        label: `<b>${hookName}</b><br>${hookData.packets_total} pkts`,\n        color: 'rgba(100, 150, 255, 0.8)',\n        customdata: { type: 'hook', name: hookName }\n      });\n      nodeMap.set(hookName, nodeIndex++);\n    }\n  });\n\n  // 2. Add Layer nodes (for each hook)\n  HOOK_ORDER.forEach(hookName => {\n    const hookData = stats.hooks[hookName];\n    if (!hookData) return;\n\n    const layers = hookData.layers || {};\n    LAYER_ORDER.forEach(layerName => {\n      if (layers[layerName]) {\n        const layerData = layers[layerName];\n        const nodeName = `${hookName}::${layerName}`;\n\n        // Color based on drop rate\n        const color = getColorFromDropRate(layerData.drop_rate || 0);\n\n        nodes.push({\n          label: `<b>${layerName}</b><br>${layerData.packets_in} pkts<br>${layerData.drop_rate?.toFixed(1) || 0}% drop`,\n          color: color,\n          customdata: {\n            type: 'layer',\n            hook: hookName,\n            layer: layerName,\n            data: layerData\n          }\n        });\n        nodeMap.set(nodeName, nodeIndex++);\n      }\n    });\n  });\n\n  // 3. Build links: Hook -> Layer\n  HOOK_ORDER.forEach(hookName => {\n    const hookData = stats.hooks[hookName];\n    if (!hookData) return;\n\n    const hookIndex = nodeMap.get(hookName);\n    const layers = hookData.layers || {};\n\n    LAYER_ORDER.forEach(layerName => {\n      if (layers[layerName]) {\n        const layerData = layers[layerName];\n        const layerNodeName = `${hookName}::${layerName}`;\n        const layerIndex = nodeMap.get(layerNodeName);\n\n        // Link value = packets_in\n        links.push({\n          source: hookIndex,\n          target: layerIndex,\n          value: layerData.packets_in,\n          color: 'rgba(200, 200, 200, 0.3)',\n          customdata: {\n            hook: hookName,\n            layer: layerName,\n            packets: layerData.packets_in,\n            drops: layerData.drops || 0\n          }\n        });\n      }\n    });\n  });\n\n  return { nodes, links };\n}\n\nfunction RealtimeView() {\n  const [enabled, setEnabled] = useState(false);\n  const [connected, setConnected] = useState(false);\n  const [stats, setStats] = useState(null);\n  const [recentEvents, setRecentEvents] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [sankeyData, setSankeyData] = useState(null);\n  \n  const socketRef = useRef(null);\n  const maxEvents = 50;\n\n  // Initialize Socket.IO connection\n  useEffect(() => {\n    const socket = io(SOCKET_URL, {\n      transports: ['websocket', 'polling'],\n      reconnection: true,\n      reconnectionDelay: 1000,\n      reconnectionAttempts: 5\n    });\n\n    socket.on('connect', () => {\n      console.log('[Realtime] Connected to WebSocket');\n      setConnected(true);\n      loadStats();\n    });\n\n    socket.on('disconnect', () => {\n      console.log('[Realtime] Disconnected from WebSocket');\n      setConnected(false);\n    });\n\n    socket.on('packet_event', (event) => {\n      setRecentEvents(prev => {\n        const newEvents = [event, ...prev].slice(0, maxEvents);\n        return newEvents;\n      });\n    });\n\n    socket.on('stats_update', (stats) => {\n      console.log('[Realtime] Received stats_update:', stats);\n      setStats(stats);\n      \n      // Build Sankey data\n      const { nodes, links } = buildSankeyData(stats);\n      if (nodes.length > 0) {\n        setSankeyData({ nodes, links });\n      }\n    });\n\n    socket.on('status', (status) => {\n      setEnabled(status.enabled);\n    });\n\n    socketRef.current = socket;\n\n    return () => {\n      socket.disconnect();\n    };\n  }, []);\n\n  // Load stats periodically\n  useEffect(() => {\n    if (enabled && connected) {\n      const interval = setInterval(loadStats, 2000);\n      return () => clearInterval(interval);\n    }\n  }, [enabled, connected]);\n\n  const loadStats = async () => {\n    try {\n      const res = await axios.get(`${API_BASE}/realtime/stats`);\n      setStats(res.data);\n      setEnabled(res.data.enabled);\n      \n      // Build Sankey data\n      if (res.data && res.data.hooks) {\n        const { nodes, links } = buildSankeyData(res.data);\n        if (nodes.length > 0) {\n          setSankeyData({ nodes, links });\n        }\n      }\n    } catch (err) {\n      console.error('Error loading realtime stats:', err);\n    }\n  };\n\n  const toggleRealtime = async () => {\n    setLoading(true);\n    setError(null);\n    \n    try {\n      if (enabled) {\n        await axios.post(`${API_BASE}/realtime/disable`);\n        setEnabled(false);\n        setRecentEvents([]);\n        setSankeyData(null);\n      } else {\n        await axios.post(`${API_BASE}/realtime/enable`);\n        setEnabled(true);\n      }\n      await loadStats();\n    } catch (err) {\n      setError(err.response?.data?.error || 'Failed to toggle realtime');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const resetStats = async () => {\n    setLoading(true);\n    try {\n      await axios.post(`${API_BASE}/realtime/reset`);\n      setRecentEvents([]);\n      setSankeyData(null);\n      await loadStats();\n    } catch (err) {\n      setError('Failed to reset stats');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const formatTimestamp = (timestamp) => {\n    const date = new Date(timestamp * 1000);\n    return date.toLocaleTimeString('en-US', { \n      hour12: false, \n      hour: '2-digit', \n      minute: '2-digit', \n      second: '2-digit',\n      fractionalSecondDigits: 3 \n    });\n  };\n\n  return (\n    <div className=\"realtime-container\">\n      {error && (\n        <div className=\"realtime-error\">\n          <strong>‚ö†Ô∏è Error:</strong> {error}\n          <button onClick={() => setError(null)}>‚úï</button>\n        </div>\n      )}\n\n      {/* Header Controls */}\n      <div className=\"realtime-header\">\n        <div className=\"realtime-header-left\">\n          <h2>üé• Realtime Packet Visualization</h2>\n          <div className=\"connection-status\">\n            <span className={`status-dot ${connected ? 'connected' : 'disconnected'}`}></span>\n            <span>{connected ? 'Connected' : 'Disconnected'}</span>\n          </div>\n        </div>\n        \n        <div className=\"realtime-header-right\">\n          <button\n            className={`btn ${enabled ? 'btn-danger' : 'btn-primary'}`}\n            onClick={toggleRealtime}\n            disabled={loading || !connected}\n          >\n            {loading ? '‚è≥ Loading...' : enabled ? '‚è∏Ô∏è Disable' : '‚ñ∂Ô∏è Enable'}\n          </button>\n          \n          {enabled && (\n            <button\n              className=\"btn btn-secondary\"\n              onClick={resetStats}\n              disabled={loading}\n            >\n              üîÑ Reset Stats\n            </button>\n          )}\n        </div>\n      </div>\n\n      {!enabled && (\n        <div className=\"realtime-disabled-notice\">\n          <h3>üì∫ Realtime Visualization Disabled</h3>\n          <p>Click \"Enable\" to start capturing live packet events</p>\n          <p className=\"hint\">\n            üí° Tip: Enable realtime to see live packet flows through hooks and layers\n          </p>\n        </div>\n      )}\n\n      {enabled && stats && (\n        <>\n          {/* Statistics Dashboard */}\n          <div className=\"realtime-stats-grid\">\n            <div className=\"realtime-stat-card primary\">\n              <div className=\"stat-icon\">üìä</div>\n              <div className=\"stat-content\">\n                <div className=\"stat-value\">{stats.total_packets?.toLocaleString() || 0}</div>\n                <div className=\"stat-label\">Total Packets</div>\n              </div>\n            </div>\n\n            <div className=\"realtime-stat-card success\">\n              <div className=\"stat-icon\">‚ö°</div>\n              <div className=\"stat-content\">\n                <div className=\"stat-value\">{stats.packets_per_second?.toFixed(1) || 0}</div>\n                <div className=\"stat-label\">Packets/Second</div>\n              </div>\n            </div>\n\n            <div className=\"realtime-stat-card warning\">\n              <div className=\"stat-icon\">‚è±Ô∏è</div>\n              <div className=\"stat-content\">\n                <div className=\"stat-value\">{stats.uptime_seconds?.toFixed(0) || 0}s</div>\n                <div className=\"stat-label\">Uptime</div>\n              </div>\n            </div>\n\n            <div className=\"realtime-stat-card info\">\n              <div className=\"stat-icon\">ü™ù</div>\n              <div className=\"stat-content\">\n                <div className=\"stat-value\">{Object.keys(stats.hooks || {}).length}</div>\n                <div className=\"stat-label\">Active Hooks</div>\n              </div>\n            </div>\n          </div>\n\n          {/* 2-LEVEL SANKEY DIAGRAM: Hook ‚Üí Layer */}\n          {sankeyData && sankeyData.nodes.length > 0 && (\n            <div className=\"realtime-panel full-width graph-panel\">\n              <h3>üîÑ Packet Flow: Hook Pipeline ‚Üí Network Layers</h3>\n              <div className=\"graph-legend\">\n                <div className=\"legend-item\">\n                  <div className=\"legend-color\" style={{ background: 'linear-gradient(90deg, #00ff7f, #90EE90)' }}></div>\n                  <span>0-5% drop (Excellent)</span>\n                </div>\n                <div className=\"legend-item\">\n                  <div className=\"legend-color\" style={{ background: 'linear-gradient(90deg, #90EE90, #FFD700)' }}></div>\n                  <span>5-10% drop (Good)</span>\n                </div>\n                <div className=\"legend-item\">\n                  <div className=\"legend-color\" style={{ background: 'linear-gradient(90deg, #FFD700, #FFA500)' }}></div>\n                  <span>10-20% drop (Warning)</span>\n                </div>\n                <div className=\"legend-item\">\n                  <div className=\"legend-color\" style={{ background: 'linear-gradient(90deg, #FFA500, #FF6347)' }}></div>\n                  <span>20-50% drop (Critical)</span>\n                </div>\n                <div className=\"legend-item\">\n                  <div className=\"legend-color\" style={{ background: 'linear-gradient(90deg, #FF6347, #FF0000)' }}></div>\n                  <span>&gt;50% drop (Severe)</span>\n                </div>\n              </div>\n              \n              <Plot\n                data={[\n                  {\n                    type: 'sankey',\n                    orientation: 'h',\n                    node: {\n                      pad: 15,\n                      thickness: 30,\n                      line: {\n                        color: 'rgba(255, 255, 255, 0.5)',\n                        width: 2\n                      },\n                      label: sankeyData.nodes.map(n => n.label),\n                      color: sankeyData.nodes.map(n => n.color),\n                      customdata: sankeyData.nodes.map(n => n.customdata)\n                    },\n                    link: {\n                      source: sankeyData.links.map(l => l.source),\n                      target: sankeyData.links.map(l => l.target),\n                      value: sankeyData.links.map(l => l.value),\n                      color: sankeyData.links.map(l => l.color),\n                      customdata: sankeyData.links.map(l => l.customdata)\n                    }\n                  }\n                ]}\n                layout={{\n                  font: { size: 11 },\n                  plot_bgcolor: 'rgba(0, 0, 0, 0.02)',\n                  paper_bgcolor: 'transparent',\n                  margin: { l: 10, r: 10, t: 10, b: 10 },\n                  height: 500\n                }}\n                config={{\n                  responsive: true,\n                  displayModeBar: false\n                }}\n                style={{ width: '100%', height: '500px' }}\n              />\n            </div>\n          )}\n\n          {/* Visualization Panels */}\n          <div className=\"realtime-panels\">\n            {/* Hook Distribution */}\n            {stats.hooks && Object.keys(stats.hooks).length > 0 && (\n              <div className=\"realtime-panel\">\n                <h3>ü™ù Hook Distribution</h3>\n                <div className=\"hook-bars\">\n                  {Object.entries(stats.hooks).map(([hook, hookData]) => {\n                    const maxCount = Math.max(...Object.values(stats.hooks).map(h => h.packets_total || 0));\n                    const percentage = maxCount > 0 ? ((hookData.packets_total || 0) / maxCount) * 100 : 0;\n                    return (\n                      <div key={hook} className=\"hook-bar-item\">\n                        <div className=\"hook-bar-label\">\n                          <span>{hook}</span>\n                          <span className=\"hook-bar-count\">{hookData.packets_total || 0}</span>\n                        </div>\n                        <div className=\"hook-bar\">\n                          <div \n                            className=\"hook-bar-fill\" \n                            style={{ \n                              width: `${percentage}%`,\n                              background: HOOK_COLORS[hook] || '#667eea'\n                            }}\n                          />\n                        </div>\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n            )}\n\n            {/* Layer Statistics */}\n            {stats.hooks && Object.keys(stats.hooks).length > 0 && (\n              <div className=\"realtime-panel\">\n                <h3>üìä Layer Statistics</h3>\n                <div className=\"layer-stats\">\n                  {Object.entries(stats.hooks).map(([hookName, hookData]) => {\n                    const layers = hookData.layers || {};\n                    if (Object.keys(layers).length === 0) return null;\n                    \n                    return (\n                      <div key={hookName} className=\"layer-stats-section\">\n                        <h4>{hookName}</h4>\n                        {Object.entries(layers).map(([layerName, layerData]) => (\n                          <div key={layerName} className=\"layer-stat-item\">\n                            <div className=\"layer-name\">{layerName}</div>\n                            <div className=\"layer-metrics\">\n                              <span className=\"metric\">\n                                üì• {layerData.packets_in || 0} pkts\n                              </span>\n                              <span className={`metric ${layerData.drop_rate > 10 ? 'metric-warning' : ''}`}>\n                                üîª {layerData.drop_rate?.toFixed(1) || 0}%\n                              </span>\n                              <span className=\"metric\">\n                                ‚è±Ô∏è {layerData.avg_latency_ms?.toFixed(2) || 0} ms\n                              </span>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Live Events Stream */}\n          <div className=\"realtime-panel full-width\">\n            <h3>\n              üì° Live Event Stream \n              <span className=\"event-count\">({recentEvents.length}/{maxEvents})</span>\n            </h3>\n            \n            {recentEvents.length === 0 ? (\n              <div className=\"empty-events\">\n                <p>‚è≥ Waiting for events...</p>\n                <p className=\"hint\">Generate some traffic to see live packet flows</p>\n              </div>\n            ) : (\n              <div className=\"events-stream\">\n                {recentEvents.map((event, idx) => (\n                  <div key={idx} className=\"event-item\" style={{ animationDelay: `${idx * 0.02}s` }}>\n                    <div className=\"event-time\">{formatTimestamp(event.timestamp)}</div>\n                    \n                    {event.hook_name && (\n                      <div \n                        className=\"event-hook\"\n                        style={{ background: HOOK_COLORS[event.hook_name] || '#667eea' }}\n                      >\n                        {event.hook_name}\n                      </div>\n                    )}\n                    \n                    {event.layer && (\n                      <div className=\"event-layer\">{event.layer}</div>\n                    )}\n                    \n                    <div className=\"event-function\">{event.function || 'unknown'}</div>\n                    \n                    {event.protocol_name && (\n                      <div className=\"event-protocol\">\n                        {PROTOCOL_ICONS[event.protocol_name] || 'üì¶'} {event.protocol_name}\n                      </div>\n                    )}\n                    \n                    {event.src_ip && event.dst_ip && (\n                      <div className=\"event-flow\">\n                        <span className=\"event-ip\">{event.src_ip}</span>\n                        <span className=\"event-arrow\">‚Üí</span>\n                        <span className=\"event-ip\">{event.dst_ip}</span>\n                      </div>\n                    )}\n                    \n                    {event.verdict_name && (\n                      <div \n                        className=\"event-verdict\"\n                        style={{ background: VERDICT_COLORS[event.verdict_name] || '#6c757d' }}\n                      >\n                        {event.verdict_name}\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default RealtimeView;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}